<!-- Author: Eric Wang
This is the primary page for transaction.
Handles redirects and functions to pa04.
-->

<h1>Transactions for <%= user.username %></h1>
<table class="table table-bordered">
  <tbody>
    <tr>
      <td><button class="btn btn-sm btn-primary">group by category</button></td>
      <td><button class="btn btn-sm btn-primary">sort by category</button></td>
      <td><button class="btn btn-sm btn-primary">sort by amount</button></td>
      <td><button class="btn btn-sm btn-primary">sort by description</button></td>
      <td><button class="btn btn-sm btn-primary">sort by date</button></td>
    </tr>
</tbody>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>description</th>
            <th>amount</th>
            <th>category</th>
            <th>date</th>
            <th>delete</th>
            <th>edit</th>

        </tr>
    </thead>
    <tbody>
        <% results.map(transaction => {%>
            <tr>
               <td> <%= transaction._id.description %> </td>
               <td><%= transaction._id.amount %></td>
               <td><%= transaction.category %></td>
               <td><%= transaction.date %></td>
               <td><a href="/todo/delete_transaction/<%=transaction._id %>">
                <i class="bi bi-trash"></i>
              </a></td>
              <td><a href="/todo/edit_transaction/<%=transaction._id %>">
                <i class="bi bi-pencil-square"></i>
              </a></td>
            </tr>
            <% }) %>
    </tbody>
  </table>

<h1>Add a New Transaction</h1>
<form action="/transaction/addTransaction" method = "POST">
  <input type="Text" id="description" name="description" placeholder="description" required><br><br>
  <input type="Text" id="category" name="category" placeholder="category" required><br><br>
  <input type="Number" id="amount" name="amount" placeholder="amount" required><br><br>
  <input type="Text" id="date" name="date" placeholder="mm/dd/yyyy" required><br><br>
  <button type="submit">Store</button>
</form> 
